{"version":3,"file":"html-webpack-change-assets-extension-plugin.umd.js","sources":["../src/html-webpack-change-assets-extension-plugin.ts"],"sourcesContent":["const HtmlWebpackPlugin = require('html-webpack-plugin')\n\nexport default class HtmlWebpackChangeAssetsExtensionPlugin {\n  options: object\n\n  constructor(options?: object) {\n    this.options = options || {}\n  }\n\n  apply(compiler: any) {\n    compiler.hooks.compilation.tap('HtmlWebpackChangeAssetsExtensionPlugin', (compilation: any) => {\n      let beforeGenerationHook\n      if (compilation.hooks.htmlWebpackPluginBeforeHtmlGeneration) {\n        // HtmlWebpackPlugin 3\n        const { hooks } = compilation\n        beforeGenerationHook = hooks.htmlWebpackPluginBeforeHtmlGeneration\n      } else if (HtmlWebpackPlugin.version === 4) {\n        // HtmlWebpackPlugin >= 4\n        const hooks = HtmlWebpackPlugin.getHooks(compilation)\n        beforeGenerationHook = hooks.beforeAssetTagGeneration\n      }\n\n      beforeGenerationHook.tapAsync(\n        'HtmlWebpackChangeAssetsExtensionPlugin',\n        (data: any, cb: Function) => {\n          // Skip if the plugin configuration didn't set `jsExtension`\n          if (!data.plugin.options.jsExtension) {\n            return cb(null, data)\n          }\n          const jsExtension = data.plugin.options.jsExtension\n          const tempArray = data.assets.js\n          data.assets.js = tempArray.map((scriptFile: any) => {\n            if (data.plugin.options.localonly) {\n              if (scriptFile instanceof String) {\n                const s = scriptFile as string\n                if (s.includes('http')) return scriptFile\n              }\n            }\n            return `${scriptFile}${jsExtension}`\n          })\n          return cb(null, data)\n        }\n      )\n    })\n  }\n}\n"],"names":[],"mappings":";;;;;;EAAA,IAAM,iBAAiB,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAA;EAExD;MAGE,gDAAY,OAAgB;UAC1B,IAAI,CAAC,OAAO,GAAG,OAAO,IAAI,EAAE,CAAA;OAC7B;MAED,sDAAK,GAAL,UAAM,QAAa;UACjB,QAAQ,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,wCAAwC,EAAE,UAAC,WAAgB;cACxF,IAAI,oBAAoB,CAAA;cACxB,IAAI,WAAW,CAAC,KAAK,CAAC,qCAAqC,EAAE;;kBAEnD,IAAA,KAAK,GAAK,WAAW,MAAhB,CAAgB;kBAC7B,oBAAoB,GAAG,KAAK,CAAC,qCAAqC,CAAA;eACnE;mBAAM,IAAI,iBAAiB,CAAC,OAAO,KAAK,CAAC,EAAE;;kBAE1C,IAAM,KAAK,GAAG,iBAAiB,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAA;kBACrD,oBAAoB,GAAG,KAAK,CAAC,wBAAwB,CAAA;eACtD;cAED,oBAAoB,CAAC,QAAQ,CAC3B,wCAAwC,EACxC,UAAC,IAAS,EAAE,EAAY;;kBAEtB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE;sBACpC,OAAO,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;mBACtB;kBACD,IAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAA;kBACnD,IAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAA;kBAChC,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,SAAS,CAAC,GAAG,CAAC,UAAC,UAAe;sBAC7C,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE;0BACjC,IAAI,UAAU,YAAY,MAAM,EAAE;8BAChC,IAAM,CAAC,GAAG,UAAoB,CAAA;8BAC9B,IAAI,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC;kCAAE,OAAO,UAAU,CAAA;2BAC1C;uBACF;sBACD,OAAO,KAAG,UAAU,GAAG,WAAa,CAAA;mBACrC,CAAC,CAAA;kBACF,OAAO,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;eACtB,CACF,CAAA;WACF,CAAC,CAAA;OACH;MACH,6CAAC;EAAD,CAAC;;;;;;;;"}